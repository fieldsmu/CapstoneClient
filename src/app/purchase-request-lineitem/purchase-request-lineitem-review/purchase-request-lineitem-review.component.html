<app-menu></app-menu>
<h3>{{title}}</h3>
<div *ngIf="purchaserequest && systemsrv.loggedInUser.IsReviewer==true;">
	<table class="table table-sm">
		<tr>
			<th>Id</th>
			<th>Description</th>
			<th>Justification</th>
			<th>Status</th>
		</tr>
		<tr>
			<td>{{purchaserequest.Id}}</td>
			<td>{{purchaserequest.Description}}</td>
			<td>{{purchaserequest.Justification}}</td>
			<td>{{purchaserequest.Status}}</td>
		</tr>
	</table>

	<table class="table table-sm">
		<tr>
			<th>Product</th>
			<th>Quantity</th>
			<th>Price</th>
			<th>Line Total</th>
		</tr>
		<tr *ngFor="let li of purchaserequest.PurchaseRequestLineitems">
			<td>{{li.Product.Name}}</td>
			<td>{{li.Quantity}}</td>
			<td>{{li.Product.Price}}</td>
			<td>{{li.Quantity*li.Product.Price | currency}}</td>
		</tr>
		<br />
		<tr>
			<th colspan=3 style="text-align:right;">Subtotal:</th><td>{{purchaserequest.Total | currency}}</td>
		</tr>
		<tr>
			<th colspan=3 style="text-align:right;">Tax (10%):</th><td>{{purchaserequest.Total*.10 | currency}}</td>
		</tr>
		<tr>
			<th colspan=3 style="text-align:right;">Shipping (5%):</th>
			<td>
				{{delivery ? 
					(purchaserequest.Total*.05 | currency) : 
					"(Pickup)"
				}}
			</td>
		</tr>
		<tr>
			<th colspan=3 style="text-align:right;">Total:</th>
			<td>
				{{delivery ? 
					((purchaserequest.Total) + (purchaserequest.Total*.1) + (purchaserequest.Total*.05) | currency) : 
					((purchaserequest.Total) + (purchaserequest.Total*.1) | currency)
				}}
			</td>
		</tr>
	</table>
</div>
<div>
	<button (click)="approve();" class="btn btn-success" style="margin:10px 10px 10px 0px;">Approve</button>
	<button (click)="rejectstart();" class="btn btn-danger" style="margin:0px 5px 0px 0px;">Reject</button>

	<span *ngIf="reject && purchaserequest">
		<input [(ngModel)]="purchaserequest.RejectionReason" name="RejectionReason" type="text" class="form-control" id="RejectionReason" placeholder = "Enter reason for rejection here">
		<button (click)="rejectcomplete();" class="btn btn-danger">Complete</button>
	</span>
</div>

